# Explore With Me

## Функциональность: подписки

Возможность подписываться на других пользователей и получать список актуальных событий, опубликованных этими пользователями.

### Описание эндпоинтов

1. `POST users/{userId}/subscribtions` подписаться / отписаться от пользователя


   **Переменные пути**

   `userId` - id текущего пользователя

   **Параметры запроса**

   | Параметр | Тип данных |
       | --- | --- |
   | `initiatorId` | integer($int64) |

   `initiatorId` - id пользователя, на которого подписывается текущий пользователь

   **Коды ответа**

    - 200 OK - подписка выполнена успешно
    - 404 Not Found - если пользователь или цель подписки не найдены
    - 409 Conflict - если пользователь уже подписан на указанного пользователя
2. `GET /users/{userId}/subscriptions` - возвращает список событий, опубликованных всеми пользователями, на которых подписан пользователь с `userId`, отсортированный по дате публикации


   **Переменные пути**

   `userId` - ID текущего пользователя

   **Параметры запроса**

   | Параметр | Тип данных | Значение по умолчанию | Доступные варианты |
       | --- | --- | --- | --- |
   | `text` | string |  |  |
   | `categories` | array[integer] |  |  |
   | `paid` | boolean |  |  |
   | `rangeStart` | string |  |  |
   | `rangeEnd` | string |  |  |
   | `onlyAvailable` | boolean | false |  |
   | `sort` | string |  | EVENT_DATE, VIEWS |
   | `from` | integer($int32) | 0 |  |
   | `size` | integer($int32) | 10 |  |

   **Тело ответа**

    ```json
    {
        "id": 7,        // уникальный идентификтор мероприятия, целое число 64 бит
        "initiator": {
         "id": 42,   // уникальный идентификтор инициатора, целое число 64 бит
         "name": "Santa Claus"  // имя инициатора, строка от 2 до 250 символов
        },
        "title": "Winter Holidays",
        "category": {
         "id": 5,    
         "name": "Outdoors"
        },
        "eventDate": "2030-12-31 23:55:00",
        "annotation": "Let's some skating, skiing and snowball fight",
        "paid": false,
        "confirmedRequests": false,
        "views": 8186481118
    }
    ```

   **Коды ответа**

    - 200 OK - запрос выполнен успешно
    - 400 Bad Request - запрос составлен некорректно
    - 404 Not Found - если пользователь не найден
3. `DELETE /users/{userId}/subscriptions/{initiatorId}` - отписаться от мероприятий пользователя с идентификатором `initiatorId`


   **Переменные пути**

   `userId` - ID текущего пользователя

   `initiatorId` - id пользователя, на которого подписывается текущий пользователь

   **Коды ответа**

    - 200 OK - отмена подписки выполнена успешно
    - 404 Not Found - если пользователь или цель подписки не найдены
    - 409 Conflict - если пользователь пытается отписаться от пользователя, на которого не подписан